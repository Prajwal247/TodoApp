{"ast":null,"code":"var _jsxFileName = \"/Users/prajwalthapa/Desktop/todoapp/frontend/src/Pages/Login.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Button, Container, TextInput, Group, Title, Paper, PasswordInput, Text, Alert } from '@mantine/core';\nimport { useNavigate } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport { useAuth } from '../Context/Auth';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst schema = yup.object().shape({\n  username: yup.string(),\n  password: yup.string().required('Password is required')\n});\nconst Login = () => {\n  _s();\n  var _errors$username, _errors$password;\n  const navigate = useNavigate();\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n  const {\n    isAuthenticated,\n    login\n  } = useAuth();\n  const [loginError, setLoginError] = useState(null);\n  useEffect(() => {\n    if (isAuthenticated) {\n      navigate('/');\n    }\n  }, []);\n  const handleLogin = async data => {\n    try {\n      const formData = new URLSearchParams();\n      formData.append('username', data.username);\n      formData.append('password', data.password);\n      const response = await axios.post('http://127.0.0.1:8000/token', formData);\n      console.log('Login success:', response.data);\n      login(response.data.access_token);\n      navigate('/');\n    } catch (error) {\n      console.error('Login error:', 'Invalid Credentials');\n      setLoginError('Login failed. Please try again.');\n    }\n  };\n  const toRegistration = () => {\n    navigate('/registration');\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    size: 420,\n    my: 40,\n    children: [/*#__PURE__*/_jsxDEV(Title, {\n      align: \"center\",\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      withBorder: true,\n      shadow: \"md\",\n      p: 30,\n      mt: 30,\n      radius: \"md\",\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit(handleLogin),\n        children: [/*#__PURE__*/_jsxDEV(TextInput, {\n          label: \"Email\",\n          placeholder: \"you@example.com\",\n          ...register('username'),\n          error: (_errors$username = errors.username) === null || _errors$username === void 0 ? void 0 : _errors$username.message,\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(PasswordInput, {\n          label: \"Password\",\n          placeholder: \"Your password\",\n          ...register('password'),\n          error: (_errors$password = errors.password) === null || _errors$password === void 0 ? void 0 : _errors$password.message,\n          required: true,\n          mt: \"md\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Group, {\n          position: \"apart\",\n          mt: \"md\",\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            type: \"submit\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), loginError && /*#__PURE__*/_jsxDEV(Alert, {\n        color: \"red\",\n        mt: \"md\",\n        children: loginError\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Text, {\n        align: \"center\",\n        mt: \"md\",\n        children: [\"Don't have an account yet?\", ' ', /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"subtle\",\n          onClick: toRegistration,\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n_s(Login, \"YgJeLr+Y8914Of5unYlbTCRUCH4=\", false, function () {\n  return [useNavigate, useForm, useAuth];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useEffect","useState","Button","Container","TextInput","Group","Title","Paper","PasswordInput","Text","Alert","useNavigate","useForm","yupResolver","yup","useAuth","axios","jsxDEV","_jsxDEV","schema","object","shape","username","string","password","required","Login","_s","_errors$username","_errors$password","navigate","register","handleSubmit","formState","errors","resolver","isAuthenticated","login","loginError","setLoginError","handleLogin","data","formData","URLSearchParams","append","response","post","console","log","access_token","error","toRegistration","size","my","children","align","fileName","_jsxFileName","lineNumber","columnNumber","withBorder","shadow","p","mt","radius","onSubmit","label","placeholder","message","position","type","color","variant","onClick","_c","$RefreshReg$"],"sources":["/Users/prajwalthapa/Desktop/todoapp/frontend/src/Pages/Login.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport {\n  Button,\n  Container,\n  TextInput,\n  Group,\n  Title,\n  Paper,\n  PasswordInput,\n  Text,\n  Alert\n} from '@mantine/core';\nimport { useNavigate } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport { useAuth } from '../Context/Auth';\nimport axios from 'axios';\n\nconst schema = yup.object().shape({\n  username: yup.string(),\n  password: yup.string().required('Password is required'),\n});\n\nconst Login: React.FC = () => {\n  const navigate = useNavigate();\n  const { register, handleSubmit, formState: { errors } } = useForm({\n    resolver: yupResolver(schema),\n  });\n\n  const {isAuthenticated, login } = useAuth();\n  const [loginError, setLoginError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if(isAuthenticated){\n      navigate('/')\n    }\n  },[])\n  const handleLogin = async (data: any) => {\n    try {\n      const formData = new URLSearchParams();\n      formData.append('username', data.username);\n      formData.append('password', data.password);\n  \n      const response = await axios.post('http://127.0.0.1:8000/token', formData);\n      console.log('Login success:', response.data);\n      login(response.data.access_token);\n      navigate('/');\n    } catch (error) {\n      console.error('Login error:', 'Invalid Credentials');\n      setLoginError('Login failed. Please try again.');\n    }\n  };\n\n  const toRegistration = () => {\n    navigate('/registration');\n  };\n\n  return (\n    <Container size={420} my={40}>\n      <Title align=\"center\">Login</Title>\n      <Paper withBorder shadow=\"md\" p={30} mt={30} radius=\"md\">\n        <form onSubmit={handleSubmit(handleLogin)}>\n          <TextInput\n            label=\"Email\"\n            placeholder=\"you@example.com\"\n            {...register('username')}\n            error={errors.username?.message}\n            required\n          />\n          <PasswordInput\n            label=\"Password\"\n            placeholder=\"Your password\"\n            {...register('password')}\n            error={errors.password?.message}\n            required\n            mt=\"md\"\n          />\n          <Group position=\"apart\" mt=\"md\">\n            <Button type=\"submit\">Login</Button>\n          </Group>\n        </form>\n        {loginError && (\n          <Alert color=\"red\" mt=\"md\">\n            {loginError}\n          </Alert>\n        )}\n        <Text align=\"center\" mt=\"md\">\n          Don't have an account yet?{' '}\n          <Button variant=\"subtle\" onClick={toRegistration}>\n            Register\n          </Button>\n        </Text>\n      </Paper>\n    </Container>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}